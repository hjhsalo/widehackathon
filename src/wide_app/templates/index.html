<!DOCTYPE html>
<html>
    <head>
        {% load static %}
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href='{% static "app.css" %}'>
    </head>

    <body>
        <div id="app" class="w3-container">
            {% verbatim %}
            <div id="popup-content">

                <textarea style="width: 100%; height: 5em" v-model="scrapeInput" placeholder="You can also paste text here. In practice acts as a wrapper for annif."></textarea>
                <div class="button scrape">Scrape from text area</div>


                <form method="post" enctype="multipart/form-data">
                    <input type="file" name="files[]" multiple>
                    <div class="button upload-file">Scrape from uploaded audio file</div>
                </form>

                <input v-model="youtubeLink" placeholder="Youtube link">
                <div class="button scrape-youtube">Scrape audio from youtube link</div>

                <div id="keywords-title" class="sub-title hidden">Keywords:</div>
                <ul v-if="showKeywords">
                    <li v-for="kw in keywords">
                        {{ kw }}
                    </li>
                </ul>
                <div class="button search">Search stuff using keywords</div>
                <div id="datasets-title" class="sub-title hidden">Results:</div>
                <h2 v-if="showSearchResults">Datasets</h2>
                <ul v-if="showSearchResults">
                    <li v-for="res in searchResults.datasets">
                        <div><strong>Title: </strong>{{ res.title }}</div>
                        <div><strong>Abstract: </strong>{{ res.abstract }}</div>
                        <template v-for="link in res.links">
                            <div><strong>URL: </strong><a v-bind:href="link">{{ link }}</a></div>
                        </template>
                        <hr />
                    </li>
                </ul>
                <h2 v-if="showSearchResults">Finna</h2>
                <ul v-if="showSearchResults">
                    <li v-for="res in searchResults.finna">
                        <div><strong>Title: </strong>{{ res.title }}</div>
                        <div><strong>Format: </strong>{{ res.formats[0].translated }}</div>
                        <div><strong>URL: </strong><a v-bind:href="res.url">{{ res.url }}</a></div>
                        <hr />
                    </li>
                </ul>
                <div id="error-content" class="hidden">
                    <p>Can't execute content script on this page. Check extension configuration.</p>
                </div>
            {% endverbatim %}
            </div>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17/vue.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-resource/1.5.1/vue-resource.js"></script>
        <script src='{% static "app.js" %}'></script>
    </body>

</html>

